Salim TODO :

--- Etudes ancillaires ---
Pb Authorisation : Un ID Visit peut maintenant a etre attachee a plusieurs etudes ancillaires
=> Dans authorization on doit verifier que le visit ID a bien une etude === a celle demandee et que l'utilisateur a les droits dessus
=> Le review status doit venir avec les info de la visit dans le repository (partie de code commentée)

=> Crée dans les etudes comme étant acillaires De
=> Ne peut etre creer les roles que de Reviewer et supervisor
=>Supervisor :
Ne doit pas pouvoir modifier les patients
Ne doit pas pouvoir importer des patients
Ne doit pas pouvoir modifier / delete Visites, QC, Upload, local form
Ne doit pas pouvoir faire les relance d'upload
Doit pouvoir unlock / delete les review
Doit pouvoir faire relance de review
Doit pouvoir acceder au tracker seulement pour reviews
Doit pouvoir acceder aux stats
Doit pouvoir telecharger Dicoms
Doit pouvoir exporter data de l'étude
Doit pouvoir set documentation
Doit pouvoir voir user details

Dans RBAC faire une methode isAncillaryStudy pour verifier ces droits?
Faire en sorte que les services aient les data injecté par les controlleur pour eviter les appels doublons à la db ?
--- /Etudes ancillaires ---

---- Refactoring Backend ----
Refac pour la lecture eviter de passer par des services pour laisser les services à l'ecriture ?
Dicom Series Service => peut etre evoluer vers un DicomService pour les deux niveaux
GetVisitContext des services surement a faire passer a initialisation pour eviter requettes redondantes

Entity :
- Pluger toutes les reponses "data" sur ces entity response
=> GetPossibleUpload => VisitEntity ?
=> GetReviewProgression => Visit + Review_status + Progression entity?
=> GetVisitTree => ?, visit ?

---- /Refactoring Backend ------

Messagerie à designer (communication intermembre, front avec tinymce)
Creatable Visit : Manque Study Custom Logic (+dans front skip visites optionnelles ?)
Revoir DicowWeb Authorization Service => Pb route orthanc differentes
Review  : faire une propriete dans visit pour savoir si review disponible a un user en plus de status reviewAvailable ?

Reste Autres :
- Orthanc Send to peer
- Connecteur FTP/SFTP
- Dummy Run => Impact sur la db a designer
- Dicom liée aux review  => Impacte sur la db a designer
- QC items Details => Impact sur la db a designer

**** Tests ***
Test feature : visit et autres (dicom...)
Tests Services à faire
Mock des interfaces pour les uses cases et les services
Les tests ne font pas d'assertion sur
- le tracker => Via un spy ?
- l'envoi de mails => voir doc laravel
Review => tester un scenario de custom conclusion / adjudication


--- Maintenance Tips ---

A executer en post install :
docker-compose run gaelo2 php artisan migrate --seed **ou** php artisan db:migrate --seed

Afficher une nouvelle APP_KEY : (sert a cryptage/decryptage mais pas pour hash)
php artisan key:generate --show

Si dev :
php artisan telescope:install

--- /Maintenance Tips ---
